<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Pigs at the Farm</title>
    <link
      rel="stylesheet"
      href="../../Bath-City-Farm-Project/styles/info-pages-stylesheet.css"
    />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <style>
      .quiz-question {
        display: none;
      }
      .quiz-question.active {
        display: block;
        animation: fadeIn 0.3s ease-in-out;
      }
      @keyframes fadeIn {
        from {
          opacity: 0;
          transform: translateX(-20px);
        }
        to {
          opacity: 1;
          transform: translateX(0);
        }
      }
    </style>
  </head>
  <body>
    <header>
      <div class="top-header">ğŸ– Pigs</div>
      <a href="index.html" class="close-button" aria-label="Close Page"
        >&times;</a
      >
    </header>

    <main>
      <div class="content-container">
        <div class="bubble text-center">
          <h2>ğŸ· All About Pigs!</h2>
          <p>
            Pigs are clever animals that love to roll in mud and make oink
            sounds!
          </p>
        </div>

        <img
          src="../HomePage-InfoPages/Content/Pig.jpg"
          alt="Pig image 1"
          class="animal-image"
        />

        <div class="bubble">
          <h4>ğŸ¡ Where Do Pigs Live?</h4>
          <p>
            Pigs live in pens or barns on farms. They like soft ground and shady
            spots to stay cool.
          </p>
        </div>

        <div class="bubble">
          <h4>ğŸ½ï¸ What Do Pigs Eat?</h4>
          <p>
            Pigs eat fruits, veggies, grains, and leftovers. Theyâ€™ll eat almost
            anything!
          </p>
        </div>

        <div class="bubble">
          <h4>ğŸ· What Do Pigs Give Us?</h4>
          <p>
            Pigs help farmers by eating scraps, and they give us meat like bacon
            and sausages.
          </p>
        </div>

        <div class="bubble">
          <h4>ğŸ‘‚ Fun Pig Facts!</h4>
          <ul>
            <li>Pigs roll in mud to stay cool â€” not because theyâ€™re dirty!</li>
            <li>They are super smart and love to play.</li>
            <li>Pigs have a great sense of smell!</li>
          </ul>
        </div>

        <!-- Quiz Section -->
        <div class="bubble bubble-orange quizTitle">
          <h4>ğŸ§  Piggy Pop Quiz!</h4>
          <p>Letâ€™s see what you remember about these smart oinkers! ğŸ·</p>
        </div>

        <!-- Quiz Questions -->
        <div id="quiz-container">
          <!-- Question 1 -->
          <div class="bubble bubble-orange quiz-question active" id="q1-block">
            <h5>1. What do pigs love to roll in?</h5>
            <div class="form-check">
              <input
                class="form-check-input"
                type="radio"
                name="q1"
                value="correct"
              />
              <label class="form-check-label">Mud ğŸ½</label>
            </div>
            <div class="form-check">
              <input
                class="form-check-input"
                type="radio"
                name="q1"
                value="wrong"
              />
              <label class="form-check-label">Chocolate ğŸ«</label>
            </div>
            <div class="form-check">
              <input
                class="form-check-input"
                type="radio"
                name="q1"
                value="wrong"
              />
              <label class="form-check-label">Paint ğŸ¨</label>
            </div>
          </div>

          <!-- Question 2 -->
          <div class="bubble bubble-orange quiz-question" id="q2-block">
            <h5>2. What do pigs eat?</h5>
            <div class="form-check">
              <input
                class="form-check-input"
                type="radio"
                name="q2"
                value="correct"
              />
              <label class="form-check-label">Veggies and leftovers ğŸ¥•</label>
            </div>
            <div class="form-check">
              <input
                class="form-check-input"
                type="radio"
                name="q2"
                value="wrong"
              />
              <label class="form-check-label">Only pizza ğŸ•</label>
            </div>
            <div class="form-check">
              <input
                class="form-check-input"
                type="radio"
                name="q2"
                value="wrong"
              />
              <label class="form-check-label">Ice cream ğŸ¦</label>
            </div>
          </div>

          <!-- Question 3 -->
          <div class="bubble bubble-orange quiz-question" id="q3-block">
            <h5>3. Why do pigs roll in mud?</h5>
            <div class="form-check">
              <input
                class="form-check-input"
                type="radio"
                name="q3"
                value="correct"
              />
              <label class="form-check-label">To stay cool ğŸ˜</label>
            </div>
            <div class="form-check">
              <input
                class="form-check-input"
                type="radio"
                name="q3"
                value="wrong"
              />
              <label class="form-check-label">To dance ğŸ’ƒ</label>
            </div>
            <div class="form-check">
              <input
                class="form-check-input"
                type="radio"
                name="q3"
                value="wrong"
              />
              <label class="form-check-label">To paint ğŸ¨</label>
            </div>
          </div>

          <!-- Question 4 -->
          <div class="bubble bubble-orange quiz-question" id="q4-block">
            <h5>4. What sound does a pig make?</h5>
            <div class="form-check">
              <input
                class="form-check-input"
                type="radio"
                name="q4"
                value="wrong"
              />
              <label class="form-check-label">Woof ğŸ¶</label>
            </div>
            <div class="form-check">
              <input
                class="form-check-input"
                type="radio"
                name="q4"
                value="correct"
              />
              <label class="form-check-label">Oink ğŸ·</label>
            </div>
            <div class="form-check">
              <input
                class="form-check-input"
                type="radio"
                name="q4"
                value="wrong"
              />
              <label class="form-check-label">Quack ğŸ¦†</label>
            </div>
          </div>
        </div>

        <!-- Navigation Buttons -->
        <div class="text-center mt-4">
          <button
            id="nextBtn"
            class="btn btn-primary btn-lg"
            onclick="nextQuestion()"
          >
            Next â¡ï¸
          </button>
          <button
            id="retryBtn"
            class="btn btn-warning btn-lg d-none mt-2"
            onclick="resetQuiz()"
          >
            ğŸ” Try Again
          </button>
        </div>

        <!-- Score + Sticker Button -->
        <div
          id="quiz-score"
          class="bubble bubble-yellow mt-4 text-center d-none"
        >
          <h4 id="score-message"></h4>
          <p>ğŸŒŸ Great job learning about Pigs!</p>
        </div>

        <div id="sticker-button" class="text-center mt-4 d-none">
          <button class="btn btn-success btn-lg" onclick="claimSticker('pig')">
            ğŸ· Collect Pig Sticker
          </button>
        </div>
      </div>
    </main>

    <!-- JavaScript -->
    <script>
      let currentQuestion = 1;
      const totalQuestions = 4;

      function nextQuestion() {
        const radios = document.getElementsByName("q" + currentQuestion);
        let answered = false;
        radios.forEach((r) => {
          if (r.checked) answered = true;
        });

        if (!answered) {
          alert("Please select an answer before continuing!");
          return;
        }

        // Hide current
        document
          .getElementById("q" + currentQuestion + "-block")
          .classList.remove("active");

        currentQuestion++;
        if (currentQuestion <= totalQuestions) {
          document
            .getElementById("q" + currentQuestion + "-block")
            .classList.add("active");
        } else {
          checkAnswers();
        }
      }

      function checkAnswers() {
        let score = 0;
        for (let i = 1; i <= totalQuestions; i++) {
          const radios = document.getElementsByName("q" + i);
          radios.forEach((r) => {
            if (r.checked && r.value === "correct") {
              score++;
            }
          });
        }

        const scoreBox = document.getElementById("quiz-score");
        const message = document.getElementById("score-message");
        const stickerBtn = document.getElementById("sticker-button");
        const retryBtn = document.getElementById("retryBtn");

        scoreBox.classList.remove("d-none");

        if (score === totalQuestions) {
          message.innerHTML = `ğŸ‰ Perfect! You got all <strong>${score} out of ${totalQuestions}</strong> correct!`;
          stickerBtn.classList.remove("d-none");
          retryBtn.classList.add("d-none");
        } else {
          message.innerHTML = `Oops! You got <strong>${score} out of ${totalQuestions}</strong>. Try again to collect the sticker!`;
          retryBtn.classList.remove("d-none");
          stickerBtn.classList.add("d-none");
        }

        document.getElementById("nextBtn").classList.add("d-none");
      }

      function resetQuiz() {
        for (let i = 1; i <= totalQuestions; i++) {
          const radios = document.getElementsByName("q" + i);
          radios.forEach((r) => (r.checked = false));
          document
            .getElementById("q" + i + "-block")
            .classList.remove("active");
        }

        currentQuestion = 1;
        document.getElementById("q1-block").classList.add("active");
        document.getElementById("quiz-score").classList.add("d-none");
        document.getElementById("sticker-button").classList.add("d-none");
        document.getElementById("retryBtn").classList.add("d-none");
        document.getElementById("nextBtn").classList.remove("d-none");
      }

      function claimSticker(pageKey) {
        const stickerMap = {
          rabbit: "ğŸ‡",
          chicken: "ğŸ”",
          pig: "ğŸ·",
          cow: "ğŸ®",
          duck: "ğŸ¦†",
          sheep: "ğŸ‘",
        };

        let stickers = JSON.parse(localStorage.getItem("stickers")) || [];
        let claimed = JSON.parse(localStorage.getItem("claimedStickers")) || {};

        if (claimed[pageKey]) {
          alert("You already collected this sticker!");
          return;
        }

        const newSticker = stickerMap[pageKey];
        stickers.push(newSticker);
        claimed[pageKey] = true;

        localStorage.setItem("stickers", JSON.stringify(stickers));
        localStorage.setItem("claimedStickers", JSON.stringify(claimed));
        alert(`Yay! You collected the ${newSticker} sticker!`);
      }
    </script>
  </body>
</html>
