<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Rabbits | Farm Friends</title>
    <link
      rel="stylesheet"
      href="../../Bath-City-Farm-Project/styles/info-pages-stylesheet.css"
    />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
  </head>
  <body>
    <header>
      <!-- Top Header -->
      <div class="top-header">ğŸ‡ Rabbits</div>
      <a href="index.html" class="close-button" aria-label="Close Page"
        >&times;</a
      >
    </header>

    <main>
      <div class="content-container">
        <img
          src="../HomePage-InfoPages/Content/Rabbit.png"
          alt="Rabbit Image"
          class="animal-image"
        />

        <!-- Rabbit Info -->
        <div class="bubble ">
          <h4>ğŸ° What Are Rabbits?</h4>
          <p>
            Fluffy, fast, and always munching! Rabbits hop and twitch their ears
            all day.
          </p>
        </div>

        <div class="bubble ">
          <h4>ğŸŒŸ Fun Facts</h4>
          <ul>
            <li>Long ears help them hear danger!</li>
            <li>They live in tunnels underground.</li>
            <li>Baby rabbits = kits ğŸ£</li>
            <li>They love to chew and chew!</li>
          </ul>
        </div>

        <img
          src="../HomePage-InfoPages/Content/Rabbitgif.gif"
          alt="Rabbit GIF"
          class="animal-image"
        />

        <div class="bubble ">
          <h4>ğŸ§º How We Care</h4>
          <p>
            Soft hay beds, fresh greens, clean water, and lots of gentle love.
            ğŸ¥•ğŸ‡
          </p>
        </div>

        <div class="bubble ">
          <h4>â¤ï¸ They Love...</h4>
          <p>
            Hopping, digging, and nibbling all day. Say hi and watch them
            wiggle!
          </p>
        </div>
      </div>

      <!-- Quiz -->
      <div class="content-container">
        <div class="bubble bubble-orange">
          <h4>ğŸ‡ Quick Quiz! Test Your Rabbit Smarts!</h4>
          <p>
            Pick the right answers below! ğŸ‘‡<br /><strong
              >You must get them ALL right to collect the sticker!</strong
            >
          </p>
        </div>

        <!-- Questions -->
        <div class="bubble bubble-orange">
          <h5>1. What do rabbits love to eat?</h5>
          <div class="form-check">
            <input
              class="form-check-input"
              type="radio"
              name="q1"
              id="q1a"
              value="wrong"
            />
            <label class="form-check-label" for="q1a"
              >Pizza ğŸ• <span class="feedback"></span
            ></label>
          </div>
          <div class="form-check">
            <input
              class="form-check-input"
              type="radio"
              name="q1"
              id="q1b"
              value="correct"
            />
            <label class="form-check-label" for="q1b"
              >Carrots and grass ğŸ¥•ğŸŒ¿ <span class="feedback"></span
            ></label>
          </div>
          <div class="form-check">
            <input
              class="form-check-input"
              type="radio"
              name="q1"
              id="q1c"
              value="wrong"
            />
            <label class="form-check-label" for="q1c"
              >Candy ğŸ­ <span class="feedback"></span
            ></label>
          </div>
        </div>

        <div class="bubble bubble-orange">
          <h5>2. Where do rabbits live in the wild?</h5>
          <div class="form-check">
            <input
              class="form-check-input"
              type="radio"
              name="q2"
              id="q2a"
              value="wrong"
            />
            <label class="form-check-label" for="q2a"
              >In trees ğŸŒ³ <span class="feedback"></span
            ></label>
          </div>
          <div class="form-check">
            <input
              class="form-check-input"
              type="radio"
              name="q2"
              id="q2b"
              value="correct"
            />
            <label class="form-check-label" for="q2b"
              >In tunnels underground ğŸ•³ï¸ <span class="feedback"></span
            ></label>
          </div>
          <div class="form-check">
            <input
              class="form-check-input"
              type="radio"
              name="q2"
              id="q2c"
              value="wrong"
            />
            <label class="form-check-label" for="q2c"
              >In water ğŸ’§ <span class="feedback"></span
            ></label>
          </div>
        </div>

        <div class="bubble bubble-orange">
          <h5>3. What are baby rabbits called?</h5>
          <div class="form-check">
            <input
              class="form-check-input"
              type="radio"
              name="q3"
              id="q3a"
              value="correct"
            />
            <label class="form-check-label" for="q3a"
              >Kits ğŸ¼ <span class="feedback"></span
            ></label>
          </div>
          <div class="form-check">
            <input
              class="form-check-input"
              type="radio"
              name="q3"
              id="q3b"
              value="wrong"
            />
            <label class="form-check-label" for="q3b"
              >Pups ğŸ¶ <span class="feedback"></span
            ></label>
          </div>
          <div class="form-check">
            <input
              class="form-check-input"
              type="radio"
              name="q3"
              id="q3c"
              value="wrong"
            />
            <label class="form-check-label" for="q3c"
              >Chicks ğŸ£ <span class="feedback"></span
            ></label>
          </div>
        </div>

        <div class="bubble bubble-orange">
          <h5>4. What helps rabbits hear really well?</h5>
          <div class="form-check">
            <input
              class="form-check-input"
              type="radio"
              name="q4"
              id="q4a"
              value="correct"
            />
            <label class="form-check-label" for="q4a"
              >Their long ears ğŸ‘‚ <span class="feedback"></span
            ></label>
          </div>
          <div class="form-check">
            <input
              class="form-check-input"
              type="radio"
              name="q4"
              id="q4b"
              value="wrong"
            />
            <label class="form-check-label" for="q4b"
              >Their feet ğŸ‘£ <span class="feedback"></span
            ></label>
          </div>
          <div class="form-check">
            <input
              class="form-check-input"
              type="radio"
              name="q4"
              id="q4c"
              value="wrong"
            />
            <label class="form-check-label" for="q4c"
              >Their nose ğŸ‘ƒ <span class="feedback"></span
            ></label>
          </div>
        </div>

        <!-- Action Buttons -->
        <div class="text-center mt-4">
          <button class="btn btn-success btn-lg" onclick="checkAnswers()">
            âœ… Check My Answers
          </button>
          <button
            id="retryBtn"
            class="btn btn-warning btn-lg d-none mt-2"
            onclick="resetQuiz()"
          >
            ğŸ” Try Again
          </button>
        </div>

        <!-- Score + Sticker Button -->
        <div
          id="quiz-score"
          class="bubble bubble-yellow mt-4 text-center d-none"
        >
          <h4 id="score-message"></h4>
          <p>ğŸŒŸ Great job learning about rabbits!</p>
        </div>

        <div id="sticker-button" class="text-center mt-4 d-none">
          <button
            class="btn btn-primary btn-lg"
            onclick="claimSticker('rabbit')"
          >
            ğŸ‡ Collect Rabbit Sticker
          </button>
        </div>
      </div>
    </main>

    <!-- Scripts -->
    <script>
      function checkAnswers() {
        const questions = ["q1", "q2", "q3", "q4"];
        let score = 0;

        questions.forEach((q) => {
          const radios = document.getElementsByName(q);
          radios.forEach((radio) => {
            const label = radio.nextElementSibling;
            const feedback = label.querySelector(".feedback");
            feedback.textContent = ""; // reset

            if (radio.checked) {
              if (radio.value === "correct") {
                feedback.textContent = " âœ… Correct!";
                feedback.style.color = "green";
                score++;
              } else {
                feedback.textContent = " âŒ Oops!";
                feedback.style.color = "red";
              }
              feedback.style.fontWeight = "bold";
            }
          });
        });

        const scoreBox = document.getElementById("quiz-score");
        const message = document.getElementById("score-message");
        scoreBox.classList.remove("d-none");

        const stickerBtn = document.getElementById("sticker-button");
        const retryBtn = document.getElementById("retryBtn");

        if (score === 4) {
          message.innerHTML = `ğŸ‰ Perfect! You got all <strong>4 out of 4</strong> correct!`;
          stickerBtn.classList.remove("d-none");
          retryBtn.classList.add("d-none");
        } else {
          message.innerHTML = `Oops! You got <strong>${score} out of 4</strong>. Try again to collect the sticker!`;
          retryBtn.classList.remove("d-none");
          stickerBtn.classList.add("d-none");
        }
      }

      function resetQuiz() {
        const questions = ["q1", "q2", "q3", "q4"];
        questions.forEach((q) => {
          document.getElementsByName(q).forEach((radio) => {
            radio.checked = false;
            const feedback =
              radio.nextElementSibling.querySelector(".feedback");
            if (feedback) {
              feedback.textContent = "";
            }
          });
        });

        document.getElementById("quiz-score").classList.add("d-none");
        document.getElementById("sticker-button").classList.add("d-none");
        document.getElementById("retryBtn").classList.add("d-none");
      }

      function claimSticker(pageKey) {
        const stickerMap = {
          rabbit: "ğŸ‡",
          chicken: "ğŸ”",
          pig: "ğŸ·",
          cow: "ğŸ®",
          duck: "ğŸ¦†",
          sheep: "ğŸ‘",
        };

        let stickers = JSON.parse(localStorage.getItem("stickers")) || [];
        let claimed = JSON.parse(localStorage.getItem("claimedStickers")) || {};

        if (claimed[pageKey]) {
          alert("You already collected this sticker!");
          return;
        }

        const newSticker = stickerMap[pageKey];
        stickers.push(newSticker);
        claimed[pageKey] = true;

        localStorage.setItem("stickers", JSON.stringify(stickers));
        localStorage.setItem("claimedStickers", JSON.stringify(claimed));
        alert(`Yay! You collected the ${newSticker} sticker!`);
      }
    </script>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  </body>
</html>
