<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Cows at the Farm</title>
    <link
      rel="stylesheet"
      href="../../Bath-City-Farm-Project/styles/info-pages-stylesheet.css"
    />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <style>
      .quiz-container {
        position: relative;
        overflow: hidden;
        height: 400px; /* Adjust based on your card height */
        margin-bottom: 20px;
      }

      .question-card {
        position: absolute;
        width: 100%;
        top: 0;
        left: 100%;
        opacity: 0;
        transition: all 0.5s ease-in-out;
      }

      .question-card.active {
        left: 0;
        opacity: 1;
      }

      .question-card.slide-out-left {
        left: -100%;
        opacity: 0;
      }

      .form-check {
        border: 2px solid #ccc;
        border-radius: 10px;
        padding: 20px;
        margin: 10px 0;
        cursor: pointer;
        font-size: 1.2rem;
        background-color: #f8f9fa;
        transition: background-color 0.3s, transform 0.3s;
      }

      .form-check:hover {
        background-color: #e2f0d9;
        transform: scale(1.02);
      }

      .bubble {
        padding: 20px;
        border-radius: 15px;
        margin: 20px 0;
      }

      .bubble-orange {
        background-color: #ffe5b4;
      }

      .bubble-yellow {
        background-color: #fff3cd;
      }

      #quiz-score,
      #retryBtn,
      #sticker-button {
        margin-top: 30px;
      }
    </style>
  </head>

  <body>
    <header>
      <div class="top-header">ğŸ„ Cows</div>
      <a href="index.html" class="close-button" aria-label="Close Page"
        >&times;</a
      >
    </header>

    <main>
      <div class="content-container">
        <div class="bubble text-center">
          <h2>ğŸ„ All About Cows!</h2>
          <p>
            Cows are big, friendly animals that give us milk and live on farms.
          </p>
        </div>

        <div class="animal-img-container">
          <img
            src="../HomePage-InfoPages/Content/Cow.jpg"
            alt="Cow image 1"
            class="animal-image"
          />
        </div>

        <div class="bubble">
          <h4>ğŸ¡ Where Do Cows Live?</h4>
          <p>
            Cows live in fields and barns on farms. They love to munch on grass
            and relax in the sun.
          </p>
        </div>

        <div class="bubble">
          <h4>ğŸ½ï¸ What Do Cows Eat?</h4>
          <p>
            Cows mostly eat grass, hay, and grains. Farmers feed them every day
            to keep them strong and healthy.
          </p>
        </div>

        <div class="animal-img-container">
          <img
            src="../HomePage-InfoPages/Content/CowGif.gif"
            alt="Cow image 2"
            class="animal-image"
          />
        </div>

        <div class="bubble">
          <h4>ğŸ„ What Do Cows Give Us?</h4>
          <p>
            Cows give us fresh milk! That milk can turn into cheese, yogurt, and
            butter too!
          </p>
        </div>

        <div class="bubble bubble-green">
          <h4>ğŸ‘‚ Cool Cow Facts!</h4>
          <ul>
            <li>Cows have four stomachs to help them digest their food.</li>
            <li>They can smell things up to 6 miles away!</li>
            <li>Each cow has its own "moo" sound.</li>
          </ul>
        </div>

        <!-- Quiz Intro -->
        <div class="bubble bubble-orange text-center">
          <h4>ğŸ§  Quick Cow Quiz!</h4>
          <p>Letâ€™s test your moo-velous cow knowledge! ğŸ®</p>
        </div>

        <!-- Quiz Questions with Slide Animation -->
        <div class="quiz-container">
          <div
            id="question-1"
            class="question-card active bubble bubble-orange"
          >
            <h5>1. What do cows mostly eat?</h5>
            <div class="form-check" onclick="nextQuestion(event, 'correct')">
              ğŸŒ± Grass
            </div>
            <div class="form-check" onclick="nextQuestion(event, 'wrong')">
              ğŸ¬ Candy
            </div>
            <div class="form-check" onclick="nextQuestion(event, 'wrong')">
              ğŸ• Pizza
            </div>
          </div>

          <div id="question-2" class="question-card bubble bubble-orange">
            <h5>2. Where do cows live?</h5>
            <div class="form-check" onclick="nextQuestion(event, 'wrong')">
              ğŸŒŠ In the ocean
            </div>
            <div class="form-check" onclick="nextQuestion(event, 'wrong')">
              ğŸŒ• On the moon
            </div>
            <div class="form-check" onclick="nextQuestion(event, 'correct')">
              ğŸ¡ In fields and barns
            </div>
          </div>

          <div id="question-3" class="question-card bubble bubble-orange">
            <h5>3. What do cows give us?</h5>
            <div class="form-check" onclick="nextQuestion(event, 'wrong')">
              ğŸ¥¤ Soda
            </div>
            <div class="form-check" onclick="nextQuestion(event, 'correct')">
              ğŸ¥› Milk
            </div>
            <div class="form-check" onclick="nextQuestion(event, 'wrong')">
              ğŸŒ Bananas
            </div>
          </div>

          <div id="question-4" class="question-card bubble bubble-orange">
            <h5>4. What sound does a cow make?</h5>
            <div class="form-check" onclick="nextQuestion(event, 'wrong')">
              ğŸ± Meow
            </div>
            <div class="form-check" onclick="nextQuestion(event, 'correct')">
              ğŸ„ Moo
            </div>
            <div class="form-check" onclick="nextQuestion(event, 'wrong')">
              ğŸ¶ Woof
            </div>
          </div>
          <!-- Score + Sticker -->
          <div id="quiz-score" class="bubble bubble-yellow text-center d-none">
            <h4 id="score-message"></h4>
            <p>ğŸŒŸ Great job learning about Cows!</p>
          </div>

          <div id="retryBtn" class="text-center d-none">
            <button class="btn btn-warning btn-lg" onclick="resetQuiz()">
              ğŸ” Try Again
            </button>
          </div>

          <div id="sticker-button" class="text-center d-none">
            <button
              class="btn btn-primary btn-lg"
              onclick="claimSticker('cow')"
            >
              Collect Cow Sticker
            </button>
          </div>
        </div>
      </div>
    </main>

    <script>
      let currentQuestion = 1;
      let score = 0;
      const totalQuestions = 4;

      function nextQuestion(event, correctness) {
        event.preventDefault();
        event.stopPropagation();

        if (correctness === "correct") {
          score++;
        }

        const currentDiv = document.getElementById(
          `question-${currentQuestion}`
        );
        const nextDiv = document.getElementById(
          `question-${currentQuestion + 1}`
        );

        if (nextDiv) {
          currentDiv.classList.remove("active");
          currentDiv.classList.add("slide-out-left");

          requestAnimationFrame(() => {
            nextDiv.classList.add("active");
          });

          currentQuestion++;
        } else {
          currentDiv.classList.remove("active");
          showScore();
        }
      }

      function showScore() {
        const scoreBox = document.getElementById("quiz-score");
        const message = document.getElementById("score-message");
        const retryBtn = document.getElementById("retryBtn");
        const stickerBtn = document.getElementById("sticker-button");

        scoreBox.classList.remove("d-none");
        if (score === totalQuestions) {
          message.innerHTML = `ğŸ‰ Perfect! You got all <strong>${score} out of ${totalQuestions}</strong> correct!`;
          stickerBtn.classList.remove("d-none");
          retryBtn.classList.add("d-none");
        } else {
          message.innerHTML = `Oops! You got <strong>${score} out of ${totalQuestions}</strong>. Try again to collect the sticker!`;
          retryBtn.classList.remove("d-none");
          stickerBtn.classList.add("d-none");
        }
      }

      function resetQuiz() {
        score = 0;
        currentQuestion = 1;

        for (let i = 1; i <= totalQuestions; i++) {
          const q = document.getElementById(`question-${i}`);
          q.classList.remove("active", "slide-out-left");
        }

        document.getElementById("question-1").classList.add("active");
        document.getElementById("quiz-score").classList.add("d-none");
        document.getElementById("retryBtn").classList.add("d-none");
        document.getElementById("sticker-button").classList.add("d-none");
      }

      function claimSticker(pageKey) {
        const stickerMap = {
          rabbit: "ğŸ‡",
          chicken: "ğŸ”",
          pig: "ğŸ·",
          cow: "ğŸ®",
          duck: "ğŸ¦†",
          sheep: "ğŸ‘",
        };

        let stickers = JSON.parse(localStorage.getItem("stickers")) || [];
        let claimed = JSON.parse(localStorage.getItem("claimedStickers")) || {};

        if (claimed[pageKey]) {
          alert("You already collected this sticker!");
          return;
        }

        const newSticker = stickerMap[pageKey];
        stickers.push(newSticker);
        claimed[pageKey] = true;

        localStorage.setItem("stickers", JSON.stringify(stickers));
        localStorage.setItem("claimedStickers", JSON.stringify(claimed));
        alert(`Yay! You collected the ${newSticker} sticker!`);
      }
    </script>
  </body>
</html>
