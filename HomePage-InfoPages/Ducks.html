<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Ducks at the Farm</title>

    <link
      rel="stylesheet"
      href="../../Bath-City-Farm-Project/styles/info-pages-stylesheet.css"
    />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
  </head>
  <body>
    <header>
      <!-- Page Title -->
      <div class="top-header">🦆 Ducks</div>
      <a href="index.html" class="close-button" aria-label="Close Page"
        >&times;</a
      >
    </header>

    <main>
      <div class="content-container">
        <div class="animal-img-container">
          <img
            src="../HomePage-InfoPages/Content/Duck.png"
            alt="Duck image"
            class="animal-image"
          />
        </div>

        <div class="bubble ">
          <h4>🌊 Where Do Ducks Live?</h4>
          <p>
            Ducks love to live near ponds, lakes, and rivers. They need water to
            swim and clean their feathers.
          </p>
        </div>

        <div class="bubble ">
          <h4>🍽️ What Do Ducks Eat?</h4>
          <p>
            Ducks eat bugs, plants, grains, and even small fish. On the farm,
            they love duck pellets and leafy greens!
          </p>
        </div>

        <div class="animal-img-container">
          <img
            src="../HomePage-InfoPages/Content/DuckGif.gif"
            alt="Duck image 2"
            class="animal-image"
          />
        </div>

        <div class="bubble ">
          <h4>🐥 What Are Baby Ducks Called?</h4>
          <p>
            They’re called <strong>ducklings</strong>! They're super fluffy and
            follow their mum everywhere.
          </p>
        </div>

        <div class="bubble ">
          <h4>👂 Cool Duck Facts!</h4>
          <ul>
            <li>Ducks have waterproof feathers!</li>
            <li>They can sleep with one eye open!</li>
            <li>
              They make a "quack" sound, but every duck sounds a little
              different.
            </li>
          </ul>
        </div>
      </div>

      <div class="content-container">
        <!-- Quiz Intro -->
        <div class="bubble bubble-orange quizTitle">
          <h4>🧠 Quick Duck Quiz!</h4>
          <p>Let’s see what you remember! 🦆</p>
        </div>

        <!-- Question 1 -->
        <div class="bubble bubble-orange">
          <h5>1. What do ducks love to live near?</h5>
          <div class="form-check">
            <input
              class="form-check-input"
              type="radio"
              name="q1"
              value="wrong"
            />
            <label class="form-check-label"
              >Deserts 🏜️ <span class="feedback"></span
            ></label>
          </div>
          <div class="form-check">
            <input
              class="form-check-input"
              type="radio"
              name="q1"
              value="correct"
            />
            <label class="form-check-label"
              >Ponds and rivers 🌊 <span class="feedback"></span
            ></label>
          </div>
          <div class="form-check">
            <input
              class="form-check-input"
              type="radio"
              name="q1"
              value="wrong"
            />
            <label class="form-check-label"
              >Mountains 🏔️ <span class="feedback"></span
            ></label>
          </div>
        </div>

        <!-- Question 2 -->
        <div class="bubble bubble-orange">
          <h5>2. What are baby ducks called?</h5>
          <div class="form-check">
            <input
              class="form-check-input"
              type="radio"
              name="q2"
              value="wrong"
            />
            <label class="form-check-label"
              >Chicks 🐣 <span class="feedback"></span
            ></label>
          </div>
          <div class="form-check">
            <input
              class="form-check-input"
              type="radio"
              name="q2"
              value="wrong"
            />
            <label class="form-check-label"
              >Puppies 🐶 <span class="feedback"></span
            ></label>
          </div>
          <div class="form-check">
            <input
              class="form-check-input"
              type="radio"
              name="q2"
              value="correct"
            />
            <label class="form-check-label"
              >Ducklings 🐥 <span class="feedback"></span
            ></label>
          </div>
        </div>

        <!-- Question 3 -->
        <div class="bubble bubble-orange">
          <h5>3. What helps keep ducks dry?</h5>
          <div class="form-check">
            <input
              class="form-check-input"
              type="radio"
              name="q3"
              value="correct"
            />
            <label class="form-check-label"
              >Waterproof feathers 💧 <span class="feedback"></span
            ></label>
          </div>
          <div class="form-check">
            <input
              class="form-check-input"
              type="radio"
              name="q3"
              value="wrong"
            />
            <label class="form-check-label"
              >Raincoats ☔ <span class="feedback"></span
            ></label>
          </div>
          <div class="form-check">
            <input
              class="form-check-input"
              type="radio"
              name="q3"
              value="wrong"
            />
            <label class="form-check-label"
              >Hats 🎩 <span class="feedback"></span
            ></label>
          </div>
        </div>

        <!-- Question 4 -->
        <div class="bubble bubble-orange">
          <h5>4. What sound do ducks make?</h5>
          <div class="form-check">
            <input
              class="form-check-input"
              type="radio"
              name="q4"
              value="wrong"
            />
            <label class="form-check-label"
              >Meow 🐱 <span class="feedback"></span
            ></label>
          </div>
          <div class="form-check">
            <input
              class="form-check-input"
              type="radio"
              name="q4"
              value="correct"
            />
            <label class="form-check-label"
              >Quack! 🦆 <span class="feedback"></span
            ></label>
          </div>
          <div class="form-check">
            <input
              class="form-check-input"
              type="radio"
              name="q4"
              value="wrong"
            />
            <label class="form-check-label"
              >Roar 🐯 <span class="feedback"></span
            ></label>
          </div>
        </div>

        <!-- Action Buttons -->
        <div class="text-center mt-4">
          <button class="btn btn-success btn-lg" onclick="checkAnswers()">
            ✅ Check My Answers
          </button>
          <button
            id="retryBtn"
            class="btn btn-warning btn-lg d-none mt-2"
            onclick="resetQuiz()"
          >
            🔁 Try Again
          </button>
        </div>

        <!-- Score + Sticker Button -->
        <div
          id="quiz-score"
          class="bubble bubble-yellow mt-4 text-center d-none"
        >
          <h4 id="score-message"></h4>
          <p>🌟 Great job learning about Ducks!</p>
        </div>

        <div id="sticker-button" class="text-center mt-4 d-none">
          <button class="btn btn-primary btn-lg" onclick="claimSticker('duck')">
            Collect Duck Sticker
          </button>
        </div>
      </div>
    </main>

    <!-- Scripts -->
    <script>
      function checkAnswers() {
        const questions = ["q1", "q2", "q3", "q4"];
        let score = 0;

        questions.forEach((q) => {
          const radios = document.getElementsByName(q);
          radios.forEach((radio) => {
            const label = radio.nextElementSibling;
            const feedback = label.querySelector(".feedback");
            feedback.textContent = ""; // reset

            if (radio.checked) {
              if (radio.value === "correct") {
                feedback.textContent = " ✅ Correct!";
                feedback.style.color = "green";
                score++;
              } else {
                feedback.textContent = " ❌ Oops!";
                feedback.style.color = "red";
              }
              feedback.style.fontWeight = "bold";
            }
          });
        });

        const scoreBox = document.getElementById("quiz-score");
        const message = document.getElementById("score-message");
        scoreBox.classList.remove("d-none");

        const stickerBtn = document.getElementById("sticker-button");
        const retryBtn = document.getElementById("retryBtn");

        if (score === 4) {
          message.innerHTML = `🎉 Perfect! You got all <strong>4 out of 4</strong> correct!`;
          stickerBtn.classList.remove("d-none");
          retryBtn.classList.add("d-none");
        } else {
          message.innerHTML = `Oops! You got <strong>${score} out of 4</strong>. Try again to collect the sticker!`;
          retryBtn.classList.remove("d-none");
          stickerBtn.classList.add("d-none");
        }
      }

      function resetQuiz() {
        const questions = ["q1", "q2", "q3", "q4"];
        questions.forEach((q) => {
          document.getElementsByName(q).forEach((radio) => {
            radio.checked = false;
            const feedback =
              radio.nextElementSibling.querySelector(".feedback");
            if (feedback) {
              feedback.textContent = "";
            }
          });
        });

        document.getElementById("quiz-score").classList.add("d-none");
        document.getElementById("sticker-button").classList.add("d-none");
        document.getElementById("retryBtn").classList.add("d-none");
      }

      function claimSticker(pageKey) {
        const stickerMap = {
          rabbit: "🐇",
          chicken: "🐔",
          pig: "🐷",
          cow: "🐮",
          duck: "🦆",
          sheep: "🐑",
        };

        let stickers = JSON.parse(localStorage.getItem("stickers")) || [];
        let claimed = JSON.parse(localStorage.getItem("claimedStickers")) || {};

        if (claimed[pageKey]) {
          alert("You already collected this sticker!");
          return;
        }

        const newSticker = stickerMap[pageKey];
        stickers.push(newSticker);
        claimed[pageKey] = true;

        localStorage.setItem("stickers", JSON.stringify(stickers));
        localStorage.setItem("claimedStickers", JSON.stringify(claimed));
        alert(`Yay! You collected the ${newSticker} sticker!`);
      }
    </script>
  </body>
</html>
